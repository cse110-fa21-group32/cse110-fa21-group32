<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Components/CookingMode.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="AddRecipePage.html">AddRecipePage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="CookingMode.html">CookingMode</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="FavRecipesPage.html">FavRecipesPage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="GroceryPage.html">GroceryPage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="HomePage.html">HomePage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ProfilePage.html">ProfilePage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="RecipePage.html">RecipePage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Router.html">Router</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Router.html#addPage">addPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Router.html#addPage">addPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Router.html#navigate">navigate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Router.html#navigate">navigate</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SearchBar.html">SearchBar</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SearchResultsPage.html">SearchResultsPage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="UpdateRecipePage.html">UpdateRecipePage</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addMainPages">addMainPages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addNewIngredient">addNewIngredient</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addPage">addPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#bindNavIcons">bindNavIcons</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#bindPopstate">bindPopstate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearInputError">clearInputError</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createAccount">createAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createRecipeCards">createRecipeCards</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteIngredient">deleteIngredient</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteUser">deleteUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#displayIngredients">displayIngredients</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#fetchRecipe">fetchRecipe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#GET">GET</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getCookTime">getCookTime</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEmail">getEmail</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getImage">getImage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getRecipes">getRecipes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getServings">getServings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getSummary">getSummary</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTitle">getTitle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#helloWorld">helloWorld</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadGroceryList">loadGroceryList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#login">login</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#logout">logout</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#POST">POST</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveIngredient">saveIngredient</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#searchRandomRecipes">searchRandomRecipes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#searchRecipes">searchRecipes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setFormMessage">setFormMessage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setInputError">setInputError</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setNewInfo">setNewInfo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#timeConvert">timeConvert</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Components/CookingMode.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// CookingMode.js

/**
 * Class: CookingMode
 * Redirect option from the recipe view that splits the directions of
 * the recipe onto separate views.
 */
 class CookingMode extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({ mode: 'open' });

    // Create styles and root element
    const styles = document.createElement('style');
    const article = document.createElement('article');

    // Fill in styles and root element
    styles.innerHTML = `
    h2{
      background-color: #CA676A;
      background-size: cover;
      padding: 23.5px;
      color: white;
      text-align: center;
    }
    button {
      min-width: 10%;
      border-radius: 18px;
      background-color: white;
      border: 1.5px solid #ca676a;
      text-align: center;
      font-size: 14pt;
      color:#ca676a;
    }
    #btnNav {
      position: fixed;
      display: flex;
      bottom: 40pt;
      width: 30%;
      justify-content: center;
      padding-left: 50px;
      padding-right: 50px;
    }
    #btnNav button {
      height: 25pt;
      width: 30pt;
      border-radius: 50%;
      background-color: white;
      border: 1.5px solid #ca676a;
      text-align: center;
      font-size: 14pt;
      color:#ca676a;
    }
    #btnNav button:hover {
      background-color: pink;
      color: white;
      cursor: pointer;
      transform: scale(1.10);
    }
    #btnNav button:active {
      transform: scale(0.75);
    }
    #btnNav button:focus{
      background-color: #ca676a;
      color: white;
    }
    .hoverClass:hover {
      background-color: pink;
      color: white;
      cursor: pointer;
      transform: scale(1.10);
    }
    .activeClass:active {
      transform: scale(0.75);
    }
    .css-outer {
      display: flex;
      justify-content: center;
    }
    .special-outer {
      display: table;
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      text-align: center;
    }
    .middle {
      display: table-cell;
      vertical-align: middle;
      text-align: center;
    }
    #cooking-steps {
      margin-left: auto;
      margin-right: auto;
      width: 50%;
      text-align: center;
      font-size: 20pt;
    }
    #cooking-timer {
      margin-bottom: 30px;
      position: fixed;
      bottom: 80pt;
      text-align: center;
    }
        `;
    article.innerHTML = `
        &lt;h2>Cooking Mode&lt;/h2>

        &lt;div class="css-outer">
        &lt;div class="special-outer">
        &lt;div class="middle">
        &lt;button>Quit&lt;/button>
        &lt;!--Cooking Steps-->
        &lt;div id="cooking-steps">
        &lt;/div>
        &lt;/div>
        &lt;/div>

        &lt;div id="btnNav">
        &lt;/div>
        &lt;/div>

        &lt;div class="css-outer">
        &lt;!--Cooking Timer-->
        &lt;div id="cooking-timer">
        &lt;/div>
        &lt;/div>
    

        `;

    // Append elements to the shadow root
    this.shadowRoot.append(styles, article);
  }

  /**
   * Sets all the elements of the update recipe page to the recipes current data
   * @param data Previous recipe data to set the placeholder values
   */
  set data(data) {
    this.json = data;

    // Set Title
    const title = getTitle(data).toUpperCase();
    this.shadowRoot.querySelector('h2').innerHTML = title;

    //convert totalseconds into seconds, minutes and hours format
    function convertHMS(value) {
      const sec = parseInt(value, 10); // convert value to number if it's string
      let hours = Math.floor(sec / 3600); // get hours
      let minutes = Math.floor((sec - hours * 3600) / 60); // get minutes
      let seconds = sec - hours * 3600 - minutes * 60; //  get seconds
      // add 0 if value &lt; 10; Example: 2 => 02
      if (hours &lt; 10) {
        hours = '0' + hours;
      }
      if (minutes &lt; 10) {
        minutes = '0' + minutes;
      }
      if (seconds &lt; 10) {
        seconds = '0' + seconds;
      }
      return hours + ':' + minutes + ':' + seconds; // Return is HH : MM : SS
    }

    let quitBtn = this.shadowRoot.querySelector('button');
    quitBtn.addEventListener('click', () => {
      document.querySelector('.footer').style.display = 'flex';
      document.getElementById('#section--cooking-mode')
      .classList.remove('shown');
      history.back();
    });

    //get all directions
    const content = data.recipe.analyzedInstructions[0].steps;

    // initialize page
    for (let i = 0; i &lt; content.length; i++) {
      // initialize current step
      let cookingStep = this.shadowRoot.getElementById('cooking-steps');
      let cookingBtn = this.shadowRoot.getElementById('btnNav');
      let currStep = document.createElement('p');
      currStep.setAttribute('id', `step${i + 1}`);
      currStep.innerHTML = `${i + 1}` + '. ' + content[i].step;
      cookingStep.appendChild(currStep);

      // let other than first step be invisible initially
      if (i != 0) {
        currStep.setAttribute('style', 'display:none');
      }

      // initialize all buttons
      let currBtn = document.createElement('button');
      currBtn.setAttribute('id', `btn${i + 1}`);
      currBtn.innerHTML = `${i + 1}`;
      currBtn.style.marginLeft = '5px';
      currBtn.style.marginRight = '5px';
      cookingBtn.appendChild(currBtn);

      //initialize timer if needed
      if (
        content[i].step.search(/hour/i) != -1 ||
        content[i].step.search(/minute/i) != -1 ||
        content[i].step.search(/second/i) != -1
      ) {
        //get maximum time of current recipe
        let time;
        if (content[i].step.match(/([\d.]+) *-second/)) {
          time = content[i].step.match(/([\d.]+) *-second/)[1];
          time = parseInt(time);
        } else if (content[i].step.match(/([\d.]+) *minutes/)) {
          time = content[i].step.match(/([\d.]+) *minutes/)[1];
          time = parseInt(time);
          time = time * 60;
        } else if (content[i].step.match(/([\d.]+) *hours/)) {
          time = content[i].step.match(/([\d.]+) *hours/)[1];
          time = parseInt(time);
          time = time * 3600;
        }

        let totalSeconds = 0;
        let timer;
        //count up algorithm
        function setTime() {
          ++totalSeconds;
          if (totalSeconds >= time) {
            currTime.style.color = 'red';
          } else {
            currTime.style.color = 'green';
          }
          currTime.innerHTML = convertHMS(totalSeconds);
        }

        let timerArea = this.shadowRoot.getElementById('cooking-timer');

        //create a div for current page timer
        let currArea = document.createElement('div');
        currArea.setAttribute('id', `area${i + 1}`);
        timerArea.appendChild(currArea);

        //create a paragraph for showing time
        let currTime = document.createElement('p');
        currTime.setAttribute('id', `currTime${i + 1}`);
        currTime.innerHTML = '00:00:00';
        currTime.style.fontSize = '25px';
        currTime.style.fontWeight = 'bold';
        currTime.style.color = 'green';
        currArea.appendChild(currTime);
        

        //create a start button for start timer
        let startBtn = document.createElement('button');
        startBtn.classList.add('hoverClass');
        startBtn.classList.add('activeClass');
        startBtn.style.marginLeft = '5px';
        startBtn.style.marginRight = '5px';
        startBtn.style.marginBottom = '10px';
        startBtn.setAttribute('id', `startBtn${i + 1}`);
        startBtn.innerHTML = 'Start';
        currArea.appendChild(startBtn);

        //create a pasue button
        let pauseBtn = document.createElement('button');
        pauseBtn.classList.add('hoverClass');
        pauseBtn.classList.add('activeClass');
        pauseBtn.setAttribute('id', `pauseBtn${i + 1}`);
        pauseBtn.style.marginLeft = '5px';
        pauseBtn.style.marginRight = '5px';
        pauseBtn.style.marginBottom = '10px';
        pauseBtn.innerHTML = 'Pause';
        currArea.appendChild(pauseBtn);

        //create a reset button
        let resetBtn = document.createElement('button');
        resetBtn.setAttribute('id', `resetBtn${i + 1}`);
        resetBtn.classList.add('hoverClass');
        resetBtn.classList.add('activeClass');
        resetBtn.style.marginTop = '0px';
        resetBtn.style.marginLeft = '5px';
        resetBtn.style.marginRight = '5px';
        resetBtn.style.marginBottom = '10px';
        resetBtn.innerHTML = 'Reset';
        currArea.appendChild(resetBtn);

        //create functionality for three buttons
        startBtn.addEventListener('click', () => {
          if (timer) {
            clearInterval(timer);
          }
          timer = setInterval(setTime, 1000);
        });

        pauseBtn.addEventListener('click', () => {
          clearInterval(timer);
        });

        resetBtn.addEventListener('click', () => {
          totalSeconds = 0;
          currTime.innerHTML = '00:00:00';
          currTime.style.color = 'green';
        });

        //initialize all timer to be invisible excepte first one
        if (i != 0) {
          currArea.setAttribute('style', 'display:none');
        }
      }
    }

    for (let i = 0; i &lt; content.length; i++) {
      let curr = this.shadowRoot.querySelectorAll('button')[i + 1];
      let area = this.shadowRoot.getElementById('cooking-timer');
      let pages = this.shadowRoot.querySelectorAll('p');
      curr.addEventListener('click', () => {
        for (let j = 0; j &lt; content.length; j++) {
          if (j == i) {
            pages[j].setAttribute('style', 'display: inline');
          } else {
            pages[j].setAttribute('style', 'display: none');
          }
        }

        for (let k = 0; k &lt; area.children.length; k++) {
          if (area.children[k].id == `area${i + 1}`) {
            area.children[k].setAttribute('style', 'display: inline');
          } else {
            area.children[k].setAttribute('style', 'display: none');
          }
        }
      });
    }
  }
}
function getTitle(data) {
  return data.recipe.title;
}
customElements.define('cooking-mode-page', CookingMode);

// EXPORT</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Fri Dec 10 2021 16:31:05 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
