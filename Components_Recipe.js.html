<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Components/Recipe.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="AddRecipePage.html">AddRecipePage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="CookingMode.html">CookingMode</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="FavRecipesPage.html">FavRecipesPage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="GroceryPage.html">GroceryPage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="HomePage.html">HomePage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ProfilePage.html">ProfilePage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="RecipePage.html">RecipePage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Router.html">Router</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Router.html#addPage">addPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Router.html#addPage">addPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Router.html#navigate">navigate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Router.html#navigate">navigate</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SearchBar.html">SearchBar</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SearchResultsPage.html">SearchResultsPage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="UpdateRecipePage.html">UpdateRecipePage</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addMainPages">addMainPages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addNewIngredient">addNewIngredient</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addPage">addPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#bindNavIcons">bindNavIcons</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#bindPopstate">bindPopstate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearInputError">clearInputError</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createAccount">createAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createRecipeCards">createRecipeCards</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteIngredient">deleteIngredient</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteUser">deleteUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#displayIngredients">displayIngredients</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#fetchRecipe">fetchRecipe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#GET">GET</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getCookTime">getCookTime</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEmail">getEmail</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getImage">getImage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getRecipes">getRecipes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getServings">getServings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getSummary">getSummary</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTitle">getTitle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#helloWorld">helloWorld</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadGroceryList">loadGroceryList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#login">login</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#logout">logout</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#POST">POST</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveIngredient">saveIngredient</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#searchRandomRecipes">searchRandomRecipes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#searchRecipes">searchRecipes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setFormMessage">setFormMessage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setInputError">setInputError</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setNewInfo">setNewInfo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#timeConvert">timeConvert</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Components/Recipe.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Recipe.js
import { router } from '../scripts/main.js';

/**
 * Class: RecipePage
 * Shows detailed information of the recipe broken
 * down into summary, ingredients, and direction tabs.
 */
class RecipePage extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({ mode: 'open' });

    // Create styles and root element
    const styles = document.createElement('style');
    const article = document.createElement('article');

    // Fill in styles and root element
    styles.innerHTML = `
    h2{
      margin-bottom: 0 !important;
      background-color: #ca676a;
      background-size: cover;
      padding: 23.5px;
      color: white;
      margin-top: 0;
      text-align: center;
      font-weight: lighter !important;
    }
    .openbtn {
      background: #324A54;
    }
    
    #recipe-summaryID > p{
      margin: auto;
      margin-top: 1%;
      width: 75%;
      font-size: 16pt;
    }

    .part1 {
      background-color: #CA676A;
      width: 100%;
      color: white;
      text-align: center;
    }
    
    a { text-decoration: none; }

    #recipe-ingredientsID > p{
      margin: auto;
      margin-top: 1%;
      width: 75%;
      font-size: 16pt;
    }

    #recipe-directionID > p{
      margin: auto;
      margin-top: 1%;
      width: 75%;
      font-size: 16pt;
    }

    #recipe-directionID > ol > li{
      margin: auto;
      margin-top: 1%;
      width: 60%;
      font-size: 18pt;
    }

    form {
      margin: 5%;
    }
    input[type=checkbox] {
      transform: scale(1.5);
      width: 2em;
      margin-bottom: 20px !important;
    }

    label {
      font-size: 18pt;
    }

    img{
      width: 100%;
      max-height: 400px;
      object-fit: cover;
    }

    .my-row{
      background: #324A54;
      color: white;
    }

    .my-col{
      height: 12.5rem;
    }

    .circle {
      background: white;
      border-radius: 50%;
      height: 6.5rem;
      width: 6.5rem;
      position: relative;
      margin-left:auto;
      margin-right:auto;
      display:block;
      text-align: center;
    }

    .circle > p{
      color: #609C8B;
      hyphens: auto;
      margin: 0.75em;
      text-align: center;
      font-size: 2rem;
    }

    .my-navbar{
      background: #324A54;
    }

    .navbar-light .navbar-nav .nav-link {
      color: white;
    }

    .regbutton {
      cursor: pointer;
      background-color: white;
      border-radius: 16px !important;
      border: 1.5px solid #ca676a;
      text-align: center;
      min-width: 8% !important;
      height: 2.2em; !important;
      font-size: 16pt;
      color:#ca676a;
      width: auto !important;
      box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.25);
      margin: 0.3em;
      padding: 0.2em !important;
    }

    div#recipe-ingredientsID {
      text-align: center;
    }

    .cook-button{
      font-size: 35pt !important;
      height: auto !important;
      weidth auto !important;
      border-radius: 162px !important;
    }
    .regbutton:hover {
      background-color: #ca676a;
      color: white;
    }

    .editButton, recipe-summmaryButton{
      display: inline-block;
    }

    li{
      margin-bottom: 20px !important;   
    }

    .recipe-navbar button {
      border: transparent;
      cursor: pointer;
      float: left;
      color: white;
      font-size: large;
      height: 40pt;
    }

    .recipe-navbar:after {
      /*content: "";*/
      clear: both;
      display: table;
    }

    .recipe-navbar button:not(:last-child) {
      border-right: none; /* Prevent double borders */
    }

    .emp {
      clear: both;
      height: 100px;
    }
    `;

    // Append elements to the shadow root
    this.shadowRoot.append(styles, article);
  }

  /**
   * Populate the recipe information sections with data
   * @param {JSON} data Recipe data retrieved from backend (db or Spoonacular)
   */
  set data(data) {
    console.log(data);
    this.json = data;
    this.id = this.shadowRoot.querySelector('article').innerHTML = `
    &lt;link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    &lt;!--&lt;link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">-->
    &lt;!--&lt;link rel="stylesheet" type="text/css" href="assets/styles/bootstrap-change.css">-->
    &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">&lt;/script>
    &lt;div class="part1"> 
    &lt;h2>&lt;/h2>
    &lt;div class="recipe-navbar" style="width: 100%">
      &lt;button id="ToSum" style="width:33.3%; background-color: #324A54;">Summary
        &lt;a href="#update-recipe-summaryID">&lt;/a>
      &lt;/button>
      &lt;button id="ToIng" style="width:33.4%; background-color: #CA676A;">Ingredients
        &lt;a href="#update-recipe-ingredientsID">&lt;/a>
      &lt;/button>
      &lt;button id="ToDir" style="width:33.3%; background-color: #CA676A;">Directions
        &lt;a href="#update-recipe-directionID">&lt;/a>
      &lt;/button>
    &lt;/div>
  &lt;/div>

    &lt;!--Recipe Summary-->
    &lt;div id="recipe-summaryID" class="recipe-summary" style="display: block">

      &lt;!--recipe image-->
      &lt;div id="recipe-imageID">
        &lt;img src="https://media.istockphoto.com/photos/varied-food-carbohydrates-protein-vegetables-fruits-dairy-legumes-on-picture-id1218254547?b=1&amp;k=20&amp;m=1218254547&amp;s=170667a&amp;w=0&amp;h=mOEC7x7qU5NC78mCULs-jAPeLkxy8opOvIbGSnwmAyw=" class="d-block w-100" alt="No Photo Loaded">
      &lt;/div>

      
      &lt;!--general info-->
      &lt;div class="container-fluid my-container">
        &lt;div class="row justify-content-center d-flex align-items-center my-row">
        &lt;!--cook time-->
          &lt;div class="col my-col text-center align-items-center justify-content-center p-4">
            &lt;div class="circle d-flex align-items-center my-circle justify-content-center" id="recipe-cooktimeID">
            
            &lt;/div>
            &lt;br>
            Cook Time
          &lt;/div>
          &lt;!--servings-->
          &lt;div class="col my-col text-center align-items-center justify-content-center p-4">
            &lt;div class="circle d-flex align-items-center my-circle justify-content-center" id="recipe-servingsID">
              
            &lt;/div>
            &lt;br>
            Servings
          &lt;/div>
          &lt;!--cost-->
          &lt;div class="col my-col text-center align-items-center justify-content-center p-4">
            &lt;div class="circle d-flex align-items-center my-circle justify-content-center">
              &lt;p>X&lt;/p>
            &lt;/div>
            &lt;br>
            Cost
          &lt;/div>
        &lt;/div>
      &lt;/div>
      &lt;br>
      &lt;!--description-->
      &lt;div class="recipe-description" id="recipe-descriptionID">
        &lt;button type="button" class="recipe-summmaryButton regbutton">Add to My Favorites&lt;/button>
        &lt;button type="button" class="editButton regbutton"id="editRecipe">Edit Recipe&lt;/button>
        &lt;br>
        &lt;br>
      &lt;/div>
    &lt;/div>
    
    &lt;!--Recipe Ingredients-->
    
    &lt;div id="recipe-ingredientsID" class="recipe-ingredients" style="display: none" text-align: center;">
      &lt;br> 
      &lt;form style="display: inline-block; text-align: left;">&lt;/form>
      &lt;br>
      &lt;br>
      &lt;div class="row justify-content-center">
        &lt;button type="button" id="addToList" class="regbutton">Add to List&lt;/button>
      &lt;/div>
      &lt;br>
      &lt;br>
    &lt;/div>

    &lt;!--Recipe Directions-->
    &lt;div id="recipe-directionID" class="recipe-direction" style="display: none">
      &lt;!-- empty div for spacing -->
      &lt;div class="emp">&lt;/div>
      &lt;div class="row justify-content-center">
      &lt;br>
        &lt;button type ="button" id="LinkToCM" class="cook-button regbutton">COOK&lt;/button>
      &lt;/div>
      &lt;br>
      &lt;ol>
      &lt;/ol>
      &lt;br>
    &lt;/div>
    `;

    var recipeID = data.recipe.id;
    const updateBtn = this.shadowRoot.getElementById('editRecipe');
    getRecipes(recipeID, updateBtn);

    //Edit button nav to UpdateRecipe.js
    //TODO: Have ONLY the USER recipe been send to update-recipe
    //----------------------------------------------------------------------------
    //Edit button will only appear if that's user's own recipe

    router.addPage('update-recipe', function () {
      document.getElementById('#section--recipe').classList.remove('shown');
      document.getElementById('#section--update-recipe').classList.add('shown');
      console.log(document.getElementById('#section--update-recipe'));
    });

    updateBtn.addEventListener('click', () => {
      const recipeUpdatePage = document.createElement('update-recipe-page');

      recipeUpdatePage.classList.add('shown');
      document.getElementById('#section--update-recipe').innerHTML = '';
      document
        .getElementById('#section--update-recipe')
        .appendChild(recipeUpdatePage);
      recipeUpdatePage.data = this.json;
      router.navigate('update-recipe');
    });

    // Nav to cooking mode
    router.addPage('cooking-mode', function () {
      document.getElementById('#section--recipe').classList.remove('shown');

      document.getElementById('#section--cooking-mode').classList.add('shown');
    });

    const CMPage = this.shadowRoot.getElementById('LinkToCM');
    const footer = document.querySelector('.footer');
    CMPage.addEventListener('click', () => {
      footer.style.display = 'none';
      const cookingPage = document.createElement('cooking-mode-page');
      cookingPage.classList.add('shown');
      document.getElementById('#section--cooking-mode').innerHTML = '';
      document
        .getElementById('#section--cooking-mode')
        .appendChild(cookingPage);
      cookingPage.data = this.json;
      router.navigate('cooking-mode');
    });
    footer.style.display = 'flex';

    // Set Title
    const title = getTitle(data);
    this.shadowRoot.querySelector('h2').innerHTML = title;

    // Set Summary
    const summary = document.createElement('p');
    summary.innerHTML = getSummary(data);
    this.shadowRoot
      .getElementById('recipe-imageID')
      .querySelector('img')
      .setAttribute('src', getImage(data));
    this.shadowRoot.getElementById('recipe-summaryID').appendChild(summary);

    // Set Servings
    const servings = document.createElement('p');
    servings.innerHTML = getServings(data);
    this.shadowRoot.getElementById('recipe-servingsID').appendChild(servings);

    // Set cooktime
    const cooktime = document.createElement('p');
    cooktime.innerHTML = timeConvert(getCookTime(data));
    this.shadowRoot.getElementById('recipe-cooktimeID').appendChild(cooktime);

    // Set Ingredients
    const form = this.shadowRoot.querySelector('form');
    for (let i = 0; i &lt; data.recipe.extendedIngredients.length; i++) {
      const ingredient = data.recipe.extendedIngredients[i];
      const div = document.createElement('div');
      const currElement = document.createElement('input');
      currElement.setAttribute('type', 'checkbox');
      currElement.setAttribute('name', ingredient.name);
      currElement.setAttribute('value', ingredient.original);
      div.append(currElement);
      const content = document.createElement('label');
      content.setAttribute('for', 'ingredient');
      content.innerHTML = ingredient.original;
      div.append(content);
      form.append(div);
    }

    //Set User Checked Ingredidents
    // localStorage.setItem("grocery", JSON.stringify([]));
    let current = localStorage.getItem('grocery');
    current = JSON.parse(current);

    if (current == null) {
      current = [];
    }

    for (let i = 0; i &lt; current.length; i++) {
      if (recipeID == current[i].id) {
        const checkeding = this.shadowRoot.querySelectorAll(
          'input[type="checkbox"]'
        );
        const userchecked = current[i].ingredients;
        for (let s = 0; s &lt; userchecked.length; s++) {
          for (let e = 0; e &lt; checkeding.length; e++) {
            if (userchecked[s] == checkeding[e].value) {
              checkeding[e].checked = true;
            }
          }
        }
      }
    }

    // Set Directions
    const list = this.shadowRoot.querySelector('ol');
    for (let i = 0; i &lt; data.recipe.analyzedInstructions[0].steps.length; i++) {
      const step = data.recipe.analyzedInstructions[0].steps[i];
      const currStep = document.createElement('li');
      currStep.innerHTML = step.step;
      list.appendChild(currStep);
    }

    // Functions for the layout of recipe detailed page
    this.shadowRoot.getElementById('ToSum').addEventListener('click', (e) => {
      e.preventDefault();
      this.shadowRoot
        .getElementById('recipe-summaryID')
        .setAttribute('style', 'display: show');
      this.shadowRoot
        .getElementById('recipe-ingredientsID')
        .setAttribute('style', 'display: none');
      this.shadowRoot
        .getElementById('recipe-directionID')
        .setAttribute('style', 'display: none');

      this.shadowRoot.getElementById('ToSum').style.backgroundColor = '#324A54';
      this.shadowRoot.getElementById('ToDir').style.backgroundColor = '#CA676A';
      this.shadowRoot.getElementById('ToIng').style.backgroundColor = '#CA676A';
    });

    this.shadowRoot.getElementById('ToDir').addEventListener('click', (e) => {
      e.preventDefault();
      this.shadowRoot
        .getElementById('recipe-summaryID')
        .setAttribute('style', 'display: none');
      this.shadowRoot
        .getElementById('recipe-ingredientsID')
        .setAttribute('style', 'display: none');
      this.shadowRoot
        .getElementById('recipe-directionID')
        .setAttribute('style', 'display: show');
      this.shadowRoot.getElementById('ToSum').style.backgroundColor = '#CA676A';
      this.shadowRoot.getElementById('ToDir').style.backgroundColor = '#324A54';
      this.shadowRoot.getElementById('ToIng').style.backgroundColor = '#CA676A';
    });

    this.shadowRoot.getElementById('ToIng').addEventListener('click', (e) => {
      e.preventDefault();
      this.shadowRoot
        .getElementById('recipe-summaryID')
        .setAttribute('style', 'display: none');
      this.shadowRoot
        .getElementById('recipe-ingredientsID')
        .setAttribute('style', 'display: show');
      this.shadowRoot
        .getElementById('recipe-directionID')
        .setAttribute('style', 'display: none');
      this.shadowRoot.getElementById('ToSum').style.backgroundColor = '#CA676A';
      this.shadowRoot.getElementById('ToDir').style.backgroundColor = '#CA676A';
      this.shadowRoot.getElementById('ToIng').style.backgroundColor = '#324A54';
    });

    const checkedIng = this.shadowRoot.querySelectorAll(
      'input[type="checkbox"]'
    );
    //Add Ingredients to an Array "ingredientsSelect" List if they are been checked
    function getCheckedIngredient() {
      //Build array of ingredients that were checked by the user.
      let ingredientsSelect = [];
      for (let i = 0; i &lt; checkedIng.length; i++) {
        if (checkedIng[i].checked == true) {
          ingredientsSelect.push(checkedIng[i].value);
        }
      }

      if (ingredientsSelect.length == 0){
        return;
      }

      // Construct submessage containing information about the recipe.
      let listAll = {
        name: title, // Title of recipe.
        id: recipeID,
        ingredients: ingredientsSelect, // List of checked ingredients in the recipe.
        checked: new Array(ingredientsSelect.length).fill(false), // All unchecked in list
        recipe: data,
      };

      // Updates the last edited timestamp on grocery
      localStorage.setItem('groceryStamp', Date.now());
      // Push listAll to the localStorage
      var tempList = localStorage.getItem('grocery');
      tempList = JSON.parse(tempList);
      console.log(tempList);
      if (tempList == null || tempList.length == 0) {
        tempList = [];
        // if localStorage for "grocery" is empty, push "listAll" directly to the local storage
        tempList.push(listAll);
        localStorage.setItem('grocery', JSON.stringify(tempList));
        document.getElementById('#section--grocery').firstChild.update = '';
        return;
      }
      // If ingredients have been pushed (with the same recipe id) -> Update ingredients
      else {
        for (let i = 0; i &lt; tempList.length; i++) {
          if (data.recipe.id == tempList[i].id) {
            tempList[i].ingredients = ingredientsSelect;
            localStorage.setItem('grocery', JSON.stringify(tempList));
            document.getElementById('#section--grocery').firstChild.update = '';
            return;
          }
        }
      }
      // If ingredients not been pushed -> push "listAll" to the local storage
      tempList.push(listAll);
      localStorage.setItem('grocery', JSON.stringify(tempList));

      document.getElementById('#section--grocery').firstChild.update = '';
    }

    //"Add to list" button -> send the data to Grocery list
    const checklist = this.shadowRoot.getElementById('addToList');
    checklist.addEventListener('click', (e) => {
      e.preventDefault();
      getCheckedIngredient();
    });
  }

  /**
   * Returns the object of the currect recipe being used.
   */
  get data() {
    return this.json;
  }
}

// SUMMARY ELEMENTS
/**
 * Returns number of minutes for cooking the recipe
 * @param {JSON} data
 * @returns Number of minutes it takes to cook this recipe
 */
function getCookTime(data) {
  return data.recipe['readyInMinutes'];
}

// TIME CONVERT
/**
 * Converts time units into a string format (hrs and min equivalent)
 * @param {int} n
 * @returns Number of minutes, hours, and minutes it takes to cook this recipe
 */
function timeConvert(n) {
  var num = n;
  var hours = num / 60;
  var rhours = Math.floor(hours);
  var minutes = (hours - rhours) * 60;
  var rminutes = Math.round(minutes);
  if (rhours == 0) {
    return rminutes + 'm';
  } else if (rminutes == 0) {
    return rhours + 'h';
  } else {
    return rhours + 'h ' + rminutes + 'm';
  }
}

/**
 * Returns the number of servings
 * @param {JSON} data
 * @returns Number of servings this recipe creates
 */
function getServings(data) {
  return data.recipe['servings'];
}

/**
 * Returns the image (Base 64 format)
 * @param {JSON} data
 * @returns Base 64 format of image or url link to image depending on if it comes from spoonacular or our database
 */
function getImage(data) {
  return data.recipe.image;
}

/**
 * Returns the title of the recipe
 * @param {JSON} data
 * @returns Title of recipe
 */
function getTitle(data) {
  return data.recipe.title;
}

/**
 * Returns the summary of the recipe
 * @param {JSON} data
 * @returns Summary paragraph of the recipe
 */
function getSummary(data) {
  return data.recipe.summary;
}

/**
 * Call function for Edit to appear
 * @param {*} recipeID
 * @param {*} button
 */
function getRecipes(recipeID, button) {
  let userRecipes = localStorage.getItem('userRecipes');
  if (userRecipes !== null &amp;&amp; userRecipes.indexOf(recipeID) >= 0) {
    button.parentElement.style.display = 'block';
  } else {
    button.parentElement.style.display = 'none';
  }
}

// TODO: remove if remains unused
// // INGREDIENTS ELEMENTS
// /**
//  *
//  * @param {JSON} data
//  * @returns Array of objects where each object contains an ingredient summary,
//  * the ingredient summary object looks like, {name:"", unit:"", amount:""}
//  */
// function getIngreds(data) {
//   return data['extendedIngredients'];
// }

// // DIRECTIONS ELEMENTS
// /**
//  *
//  * @param {JSON} data
//  * @returns An ordered list &lt;ol> with each step in its own list element &lt;li>
//  */
// function getDirs(data) {
//   return data['instructions'];
// }

customElements.define('recipe-page', RecipePage);
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Fri Dec 10 2021 16:04:12 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
